<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/favicon.png">

    <title>cwrap - uid_wrapper</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  <link href="assets/cwrap.css" type="text/css" rel="stylesheet"></head>

  <body>
    <div class="container subpage-header">
      <div class="">
        <a href="/">cwrap</a>
      </div>
    </div>

    <div class="container subpage">
        <h1>The uid_wrapper library</h1>
        <!-- Example row of columns -->
        <div class="row">
            <div class="col-md-12">
                <p>A wrapper to fake privilege separation</p>

                <br />

                <p align="center">
                    <a class="btn btn-primary btn-lg" role="button" href="https://git.samba.org/?p=uid_wrapper.git">Clone with git <img src="img/download.png" alt="Download" /></a> Â·
                    <a class="btn btn-primary btn-lg" role="button" href="https://bugzilla.samba.org/enter_bug.cgi?product=cwrap">Report a bug <img src="img/download.png" alt="Download" /></a>
                </p>

                <br />

                <p>
                Some projects, such as a file server, need privilege
                separation to be able to switch to the user who owns the
                files and do file operations on their behalf. uid_wrapper
                convincingly lies to the application, letting it believe
                it is operating as root and even switching between UIDs
                and GIDs as needed. You can start any application making
                it believe it is running as root.
                </p>

                <h2>Features</h2>
                <ul>
                    <li>Allows uid switching as a normal user.</li>
                    <li>Start any application making it believe it is running as root.</li>
                    <li>Support for user/group changing in the local thread using the syscalls (like glibc).</li>
                    <li>uid_wrapper intercepts <code>seteuid(2)</code> and related calls and simulates them in a way transparent to the application</li>
                </ul>

                <h2>Detailed descriptions</h2>
                <ul>
                    <li>If you load the uid_wrapper and enable it with setting <code>UID_WRAPPER=1</code> all <code>setuid()</code> and <code>setgid()</code> calls will work, even as a normal user.</li>
                    <li>It is possible to start your application as fake root with setting <code>UID_WRAPPER_ROOT=1.</code></li>
                    <li>Enable debugging of uid_wrapper itself by setting the <code>UID_WRAPPER_DEBUGLEVEL</code> variable</li>
                </ul>

                <h2>Example</h2>
<pre>$ LD_PRELOAD=libuid_wrapper.so UID_WRAPPER=1 UID_WRAPPER_ROOT=1 id
uid=0(root) gid=0(root) groups=100(users),0(root)</pre>

            </div> <!-- /col -->
        </div>

    </div>
    <div class="container footer-line">
      <footer>
      <div class="row footer">
        <div class="col-md-6">
          <h3>Contact</h3>
          <p><a href="https://lists.samba.org/mailman/listinfo/samba-technical" target="_blank">samba-technical@lists.samba.org</a></p>
        </div>

        <div class="col-md-3 col-md-offset-3">
          <h3>Credits</h3>
          <p>Andreas Schneider</p>
        </div>
      </div>
      </footer>
   </div> <!-- /container -->

   <!-- Bootstrap core JavaScript
        ================================================== -->
   <!-- Placed at the end of the document so the pages load faster -->
   <script src="assets/jquery-1.js"></script>
   <script src="assets/bootstrap.min.js"></script>

</body></html>
